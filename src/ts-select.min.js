!function(){"use strict";"undefined"!=typeof jQuery&&(jQuery.fn.tsSelect=function(){return this.each(function(){"SELECT"!==this.tagName||this.dataset.tsSelectInitialized||a(this)})},jQuery.fn.tsVal=function(e){if(0===this.length)return this;let t=this[0];if(!t)return this;let l=null;return("SELECT"===t.tagName?!t.id||(l=document.getElementById(`ts-select-${t.id}`))||(l=document.querySelector(`[data-ts-select-for="${t.id}"]`)):t.classList&&t.classList.contains("ts-select")&&t.classList.contains("dropdown")&&(l=t),l&&"function"==typeof l.getVal&&"function"==typeof l.setVal)?0===arguments.length?l.getVal():(l.setVal(e),this):0!==arguments.length?this:void 0});let e=void 0!==window.bootstrap;function t(e,t,l){let n=document.createElement(e);return t&&(n.className=t),l&&Object.keys(l).forEach(e=>{"text"===e?n.textContent=l[e]:"html"===e?n.innerHTML=l[e]:n.setAttribute(e,l[e])}),n}function l(e){return Array.from(e.options).filter(e=>e.selected&&!e.disabled)}function n(e){return Array.from(e.querySelectorAll("[data-index]")).filter(e=>!e.classList.contains("d-none"))}function s(e,t,n){let s=t.multiple?null:Array.from(t.options).find(e=>e.dataset&&"true"===e.dataset.placeholder),a=l(t).filter(e=>!s||e!==s);if(n&&(0===a.length?(n.style.display="none",console.log("Hiding clear button - no selections")):(n.style.display="inline-block",console.log("Showing clear button -",a.length,"selections"))),t.multiple){if(0===a.length)e.value="",e.style.color="transparent",e.title="";else{let o=a.map(e=>{let t=e.getAttribute("data-html");return t||e.textContent}),i=t.getAttribute("ts-label-format"),r=function e(t,l){if(0===t.length)return"";if(1===t.length)return t[0];if("count"===l)return`${t.length} Selected`;if(l&&l.startsWith(">")){let n=parseInt(l.substring(1));if(!isNaN(n))return t.length<=n?t.join(", "):`${t.length} Selected`}let s=t[0],a=s.length;for(let o=1;o<t.length;o++){let i=t[o];if(a+2+i.length>50){let r=t.length-o;s+=`, ... +${r} more`;break}s+=", "+i,a+=2+i.length}return s}(o,i);e.value=r,e.style.color="#000000";let c=`${a.length} Selected. ${o.join(", ")}`;e.title=c}}else if(0===a.length){let d=t.getAttribute("placeholder")||window.TsSelectLang&&window.TsSelectLang.defaults&&window.TsSelectLang.defaults.placeholderText||"Select Item";e.value=d,e.style.color="#6c757d",e.title=d}else{let u=a[0].getAttribute("data-html"),p=u||a[0].textContent;e.value=p,e.style.color="#000000",e.title=p}}function a(a){if("true"===a.dataset.tsSelectInitialized)return;a.dataset.tsSelectInitialized="true";let o=a.getAttribute("ts-searchable"),i=null===o||"true"===o,r=parseInt(a.getAttribute("ts-size")||"",10),c=a.getAttribute("ts-actions-box"),d=a.multiple&&(null===c||"true"===c),u=a.getAttribute("ts-resize"),p=null!==a.querySelector("optgroup, group"),g=a.dataset.noResults||window.TsSelectLang&&window.TsSelectLang.defaults&&window.TsSelectLang.defaults.noResultsText||"No Results Found",f=t("div","ts-select dropdown");a.id&&(f.setAttribute("data-ts-select-for",a.id),f.setAttribute("aria-controls",a.id),f.id=`ts-select-${a.id}`),a.disabled&&f.classList.add("disabled");let h=t("input","form-control ts-select-toggle pe-4",{type:"text",readonly:"true","data-bs-toggle":"dropdown"}),b=a.multiple?window.TsSelectLang&&window.TsSelectLang.defaults&&window.TsSelectLang.defaults.placeholderTextMultiple||"Select Items":window.TsSelectLang&&window.TsSelectLang.defaults&&window.TsSelectLang.defaults.placeholderText||"Select Item";if(h.placeholder=a.getAttribute("placeholder")||b,!a.multiple){let m=Array.from(a.options).find(e=>""===e.value&&"true"===e.dataset.placeholder);m||((m=document.createElement("option")).value="",m.textContent=h.placeholder,m.setAttribute("hidden",""),m.setAttribute("disabled",""),m.dataset.placeholder="true",a.insertBefore(m,a.firstChild));let y=Array.from(a.options),L=y.some(e=>e.hasAttribute("selected"));L||(y.forEach(e=>e.selected=!1),m.selected=!0)}let x=t("div","dropdown-menu p-2 pb-2"),S=null,v=null;if(i){S=t("div","ts-select-search");let $=window.TsSelectLang&&window.TsSelectLang.defaults&&window.TsSelectLang.defaults.searchPlaceholder||"Search...";v=t("input","inputSelectSearch form-control form-control-sm",{type:"search",placeholder:$}),S.appendChild(v),x.appendChild(S),v.addEventListener("input",function(e){let t=e.target.value.toLowerCase(),l=k.querySelectorAll("[data-index]"),n=!1;if(l.forEach((e,l)=>{let s=e.textContent.toLowerCase();s.includes(t)?(e.classList.remove("d-none"),n=!0):e.classList.add("d-none")}),t&&k.querySelectorAll(".ts-select-group-label").forEach(e=>{let l=e.textContent.toLowerCase();if(l.includes(t)){e.classList.remove("d-none");let s=e.dataset.groupId,a=k.querySelectorAll(`[data-parent-group="${s}"]`);a.forEach(e=>{e.classList.remove("d-none"),n=!0})}}),k.querySelectorAll(".ts-select-group-label").forEach(e=>{let t=parseInt(e.dataset.level||"0",10),l=!1;for(let n=e.nextElementSibling;n;n=n.nextElementSibling){if(n.classList&&n.classList.contains("ts-select-group-label")){let s=parseInt(n.dataset.level||"0",10);if(s<=t)break}if(n.hasAttribute&&n.hasAttribute("data-index")&&!n.classList.contains("d-none")){l=!0;break}}e.classList.toggle("d-none",!l)}),t&&n){let s=k.querySelector("[data-index]:not(.d-none)");s&&s.scrollIntoView({block:"nearest"})}G()}),v.addEventListener("keydown",function(e){if("Enter"===e.key){if(e.preventDefault(),d){let t=E.box.querySelector("button");t&&t.focus()}else{let l=k.querySelector("[data-index]:not(.d-none)");l&&l.focus()}}})}let E=null;d&&(E=function e(){let l=t("div","ts-select-actions"),n=window.TsSelectLang&&window.TsSelectLang.defaults&&window.TsSelectLang.defaults.selectAllText||"All",s=window.TsSelectLang&&window.TsSelectLang.defaults&&window.TsSelectLang.defaults.deselectAllText||"None",a=window.TsSelectLang&&window.TsSelectLang.defaults&&window.TsSelectLang.defaults.inverseText||"Inverse",o=t("button","btnSelectAction  w-100 btn  btn-sm btn-light btn-gradient",{type:"button",text:n}),i=t("button","btnSelectAction w-100 btn  btn-sm btn-light btn-gradient",{type:"button",text:s}),r=t("button","btnSelectAction w-100  btn btn-sm btn-light btn-gradient",{type:"button",text:a});return l.append(o,i,r),{box:l,btnAll:o,btnNone:i,btnInverse:r}}(),x.appendChild(E.box),E.btnAll.addEventListener("click",function(){Array.from(a.options).forEach(e=>{e.disabled||e.dataset.placeholder||(e.selected=!0)}),a.dispatchEvent(new Event("change",{bubbles:!0})),V()}),E.btnNone.addEventListener("click",function(){Array.from(a.options).forEach(e=>e.selected=!1),a.dispatchEvent(new Event("change",{bubbles:!0})),V()}),E.btnInverse.addEventListener("click",function(){Array.from(a.options).forEach(e=>{e.disabled||e.dataset.placeholder||(e.selected=!e.selected)}),a.dispatchEvent(new Event("change",{bubbles:!0})),V()}));let k=t("div","ts-select-menu list-group list-group-flush");r&&function e(t,l){if(!l||"true"===t.dataset.customResize)return;let n=t.querySelector('[data-index]:not([style*="display: none"])'),s=50;if(n){let a=n.getBoundingClientRect();a&&a.height&&(s=a.height)}t.style.maxHeight=`${Math.max(1,l)*s}px`,t.style.overflow="auto"}(k,r),x.appendChild(k);let w=null;if("true"===u){w=t("div","ts-select-resize-handle");let T=window.TsSelectLang&&window.TsSelectLang.defaults&&window.TsSelectLang.defaults.resizeHandleText||"â†•";w.innerHTML=T;let A=window.TsSelectLang&&window.TsSelectLang.defaults&&window.TsSelectLang.defaults.resizeHandleTitle||"Drag to resize dropdown height";w.title=A,w.style.cursor="ns-resize",w.style.height="8px",w.style.backgroundColor="#f8f9fa",w.style.borderTop="1px solid #dee2e6",w.style.borderBottom="1px solid #dee2e6";let C=!1,_=0,q=0;function I(e){if(!C)return;let t=e.clientY-_,l=Math.max(40,Math.min(600,q+t));k.style.height=`${l}px`,k.style.maxHeight="none",k.style.overflowY="auto",k.style.overflowX="hidden",k.dataset.customResize="true"}function D(){C=!1,document.removeEventListener("mousemove",I),document.removeEventListener("mouseup",D),document.body.style.cursor="",w.style.backgroundColor="#f8f9fa",f.dataset.customHeight=k.style.height,k.dataset.customResize="true";let e=k.querySelectorAll(".ts-select-group-label, .optionSelect");e.forEach(e=>{e.style.removeProperty("height"),e.style.removeProperty("min-height"),e.style.removeProperty("max-height")})}w.addEventListener("mousedown",function(e){C=!0,_=e.clientY,q=k.offsetHeight,document.addEventListener("mousemove",I),document.addEventListener("mouseup",D),document.body.style.cursor="ns-resize",w.style.backgroundColor="#007bff"}),x.appendChild(w)}let P=[],H=t("div","text-muted py-1 small ts-select-no-results",{text:g});H.style.display="none",x.appendChild(H),Array.from(a.children).forEach(e=>(function e(l,n,s=null){let o="OPTGROUP"===l.tagName||"GROUP"===l.tagName;if(o){let i=l,r=t("div","ts-select-group-label dropdown-item px-1 py-1");r.dataset.level=String(n),r.classList.add(`level-${n}`),r.dataset.groupId=i.getAttribute("label")||String(Math.random()),r.dataset.expanded="true",r.style.cursor="pointer";let c=window.TsSelectLang&&window.TsSelectLang.defaults&&window.TsSelectLang.defaults.groupExpandedText||"Click to collapse group";r.title=c;let d=null;if(a.multiple){d=t("input","form-check-input ts-select-group-check",{type:"checkbox"});let u=window.TsSelectLang&&window.TsSelectLang.defaults&&window.TsSelectLang.defaults.groupCheckboxTitle||"Toggle all items in this group";d.title=u,r.appendChild(d)}r.appendChild(t("span","ts-select-group-text",{text:i.getAttribute("label")||""})),r.addEventListener("click",e=>{if(console.log("Group label clicked:",e.target),console.log("Event target type:",e.target.type),console.log("Event target classList:",e.target.classList),"checkbox"===e.target.type){console.log("Checkbox clicked, ignoring group toggle");return}console.log("Calling toggleGroup for:",i.getAttribute("label")),function e(t,l,n){console.log("toggleGroup called with:",{group:t.getAttribute("label"),labelEl:l,level:n,currentExpanded:l.dataset.expanded});let s="true"===l.dataset.expanded,a=t.getAttribute("label")||String(Math.random());if(console.log("Group state:",{isExpanded:s,groupLabel:a}),s){console.log("Collapsing group:",a),function e(t,l){console.log("hideGroupDescendants called with level:",l);let n=t.nextElementSibling,s=0;for(;n;){if(n.classList&&n.classList.contains("ts-select-group-label")){let a=parseInt(n.dataset.level||"0",10);if(a<=l){console.log("Reached same or higher level, stopping at:",a);break}}(n.hasAttribute("data-index")||n.classList.contains("ts-select-group-label"))&&(console.log("Hiding element:",n.textContent||n.tagName),n.style.setProperty("display","none","important"),n.classList.add("d-none"),s++),n=n.nextElementSibling}console.log("Hidden",s,"descendants")}(l,n);let o=window.TsSelectLang&&window.TsSelectLang.defaults&&window.TsSelectLang.defaults.groupCollapsedText||"Click to expand group";l.title=o,l.dataset.expanded="false",l.classList.add("collapsed")}else console.log("Expanding group:",a),function e(t,l){console.log("showGroupDescendants called with level:",l);let n=t.nextElementSibling,s=0;for(;n;){if(n.classList&&n.classList.contains("ts-select-group-label")){let a=parseInt(n.dataset.level||"0",10);if(a<=l){console.log("Reached same or higher level, stopping at:",a);break}}(n.hasAttribute("data-index")||n.classList.contains("ts-select-group-label"))&&(console.log("Showing element:",n.textContent||n.tagName),n.style.setProperty("display","flex","important"),n.classList.remove("d-none"),s++,n.classList.contains("optionSelect")&&n.classList.add("d-flex","align-items-center","gap-2 pe-1","w-100","mb-1px")),n=n.nextElementSibling}console.log("Shown",s,"descendants")}(l,n),l.title="Click to collapse group",l.dataset.expanded="true",l.classList.remove("collapsed");k.offsetHeight,console.log("Group toggle completed")}(i,r,n)}),r.addEventListener("keydown",function(e){if("ArrowDown"===e.key){e.preventDefault(),e.stopPropagation();let t=this.nextElementSibling;for(;t;){if((t.classList.contains("ts-select-group-label")||t.hasAttribute("data-index"))&&!t.classList.contains("d-none")){t.focus();break}t=t.nextElementSibling}}else if("ArrowUp"===e.key){e.preventDefault(),e.stopPropagation();let l=this.previousElementSibling;for(;l;){if((l.classList.contains("ts-select-group-label")||l.hasAttribute("data-index"))&&!l.classList.contains("d-none")){l.focus();break}l=l.previousElementSibling}}else if("Enter"===e.key||" "===e.key){e.preventDefault(),e.stopPropagation();let n=this.querySelector('input[type="checkbox"]');n&&(n.checked=!n.checked,n.dispatchEvent(new Event("change")),setTimeout(()=>{P.forEach(e=>{if(e.checkbox){let t=a.querySelector(`optgroup[label="${e.groupId}"], group[label="${e.groupId}"]`);t&&M(e.checkbox,t)}})},10))}}),r.setAttribute("tabindex","0"),k.appendChild(r),Array.from(i.children).forEach(t=>{e(t,n+1,i.getAttribute("label"))}),d&&(M(d,i),P.push({checkbox:d,groupId:i.getAttribute("label")||String(Math.random())}),d.addEventListener("change",function(e){let t=e.target.checked,l=i.getAttribute("label");(function e(t,l){let n=k.querySelector(`[data-group-id="${t}"]`);if(!n)return;let s=function e(t){let l=[],n=t.nextElementSibling;for(;n;){if(n.classList.contains("ts-select-group-label")){let s=parseInt(n.dataset.level||"0",10),a=parseInt(t.dataset.level||"0",10);if(s<=a)break}l.push(n),n=n.nextElementSibling}return l}(n);s.forEach((e,t)=>{let n=e.querySelector('input[type="checkbox"]');if(n&&(n.checked=l,!e.classList.contains("ts-select-group-label"))){let s=parseInt(e.getAttribute("data-index"),10),o=a.options[s];o&&(o.selected=l)}})})(l,t),P.forEach(e=>{if(e.checkbox!==d){let t=a.querySelector(`optgroup[label="${e.groupId}"], group[label="${e.groupId}"]`);t&&M(e.checkbox,t)}}),a.dispatchEvent(new Event("change",{bubbles:!0})),V()}))}else{let p=l,g=Array.from(a.options).indexOf(p),f=function e(l,n,s){if(!n&&l.dataset&&"true"===l.dataset.placeholder)return null;let a=t("button","dropdown-item d-flex align-items-center gap-2 pe-1 w-100 mb-1px optionSelect",{type:"button","data-index":String(s)});if(n){let o=t("input","optionCheck form-check-input ",{type:"checkbox"});o.checked=l.selected,o.disabled=l.disabled,a.appendChild(o)}else{let i=t("input","optionRadio form-check-input ",{type:"radio",name:`radio-${l.closest("select").id||"select"}`});i.checked=l.selected,i.disabled=l.disabled,a.appendChild(i)}let r=l.getAttribute("data-id");if(r){let c=t("span","badge text-bg-light bg-gradient ts-select-id-badge",{text:r});c.title="ID : "+r,a.appendChild(c)}let d=l.getAttribute("data-html");if(d){let u=t("span","flex-grow-1 text-truncate");u.innerHTML=d,a.appendChild(u)}else{let p=t("span","flex-grow-1 text-truncate",{text:l.textContent});a.appendChild(p)}let g=l.getAttribute("data-info");if(g){let f=t("small","text-muted ms-2 ts-select-info",{text:g});f.title="Additional Info",a.appendChild(f)}return l.disabled&&a.classList.add("disabled"),a}(p,a.multiple,g);if(!f)return;f.classList.add(`level-${n}`),s&&(f.dataset.parentGroup=s),f.addEventListener("keydown",function(e){if("ArrowDown"===e.key){e.preventDefault(),e.stopPropagation();let t=this.nextElementSibling;for(;t;){if((t.classList.contains("ts-select-group-label")||t.hasAttribute("data-index"))&&!t.classList.contains("d-none")){t.focus();break}t=t.nextElementSibling}}else if("ArrowUp"===e.key){e.preventDefault(),e.stopPropagation();let l=this.previousElementSibling;for(;l;){if((l.classList.contains("ts-select-group-label")||l.hasAttribute("data-index"))&&!l.classList.contains("d-none")){l.focus();break}l=l.previousElementSibling}}else if("Enter"===e.key||" "===e.key){e.preventDefault(),e.stopPropagation();let n=this.querySelector('input[type="checkbox"], input[type="radio"]');n&&("checkbox"===n.type?n.checked=!n.checked:"radio"===n.type&&(n.checked=!0),n.dispatchEvent(new Event("change")),setTimeout(()=>{P.forEach(e=>{if(e.checkbox){let t=a.querySelector(`optgroup[label="${e.groupId}"], group[label="${e.groupId}"]`);t&&M(e.checkbox,t)}})},10))}}),f.setAttribute("tabindex","0"),k.appendChild(f)}})(e,0));let z=window.TsSelectLang&&window.TsSelectLang.defaults&&window.TsSelectLang.defaults.clearButtonTitle||"Clear",N=t("span","ts-select-clear",{title:z});N.innerHTML="&times;",N.style.display="none",a.style.display="none",a.parentNode.insertBefore(f,a),f.appendChild(a),f.appendChild(h),f.appendChild(N),f.appendChild(x),s(h,a,N),window.TsSelectLang&&document.addEventListener("tsSelectLanguageChanged",function(e){!function e(t,l,n,s,a){if(window.TsSelectLang){if(l){let o=l.querySelector(".inputSelectSearch");o&&(o.placeholder=window.TsSelectLang.get("search"))}n&&(n.btnAll&&(n.btnAll.textContent=window.TsSelectLang.get("all")),n.btnNone&&(n.btnNone.textContent=window.TsSelectLang.get("none")),n.btnInverse&&(n.btnInverse.textContent=window.TsSelectLang.get("inverse"))),a&&(a.innerHTML=window.TsSelectLang.get("clear")),s&&!s.getAttribute("data-custom-placeholder")&&(s.placeholder=window.TsSelectLang.get("selectItem"))}}(f,S,E,h,N)});let R=null;function G(){if(console.log("refreshNoResultsVisibility called, isSearchable:",i),console.log("itemsContainer:",k),console.log("noRes element:",H),!i){let e=n(k);console.log("Non-searchable: visible items count:",e.length),0===e.length?(console.log("Showing no results message"),H.textContent=g,H.classList.add("show"),H.style.removeProperty("display")):(console.log("Hiding no results message"),H.classList.remove("show"),H.style.display="none");return}let t=x.classList.contains("show");if(!t)return;let l=n(k),s=v&&"string"==typeof v.value?v.value.trim():"";if(0===l.length){let o=a.getAttribute("ts-add-new");if(s&&o){let r=`${g} for "${s}"`;H.innerHTML=`${r}. <button type="button" class="btn btn-sm btn-link p-0 ms-1 ts-select-add-new">Add This Item</button>`;let c=H.querySelector(".ts-select-add-new");c&&c.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation();try{let t=window[o];"function"==typeof t?t(s):console.warn("ts-add-new not found or not a function:",o)}catch(l){console.error("Error calling ts-add-new:",l)}})}else{let d=s?`${g} for "${s}"`:g;H.textContent=d}H.classList.add("show"),H.style.removeProperty("display")}else H.classList.remove("show"),H.style.display="none"}function V(){let e=k.querySelectorAll("[data-index]");e.forEach(e=>{let t=parseInt(e.getAttribute("data-index"),10),l=a.options[t];if(l){if(a.multiple){let n=e.querySelector('input[type="checkbox"]');n&&(n.checked=!!l.selected),e.classList.toggle("active",!!l.selected)}else{let s=e.querySelector('input[type="radio"]');s&&(s.checked=!!l.selected),e.classList.toggle("active",!!l.selected)}}}),a.multiple&&P.length>0&&P.forEach(e=>{if(!e.checkbox)return;let t=a.querySelector(`optgroup[label="${e.groupId}"], group[label="${e.groupId}"]`);t&&M(e.checkbox,t)}),s(h,a,N)}function M(e,t){let l=t.getAttribute("label"),n=k.querySelector(`[data-group-id="${l}"]`);if(!n)return;let s=function e(t){let l=[],n=t.nextElementSibling;for(;n;){if(n.classList.contains("ts-select-group-label")){let s=parseInt(n.dataset.level||"0",10),a=parseInt(t.dataset.level||"0",10);if(s<=a)break}l.push(n),n=n.nextElementSibling}return l}(n),a=0,o=0;s.forEach(e=>{if(!e.classList.contains("ts-select-group-label")){a++;let t=e.querySelector('input[type="checkbox"]');t&&t.checked&&o++}}),0===o?(e.checked=!1,e.indeterminate=!1):o===a?(e.checked=!0,e.indeterminate=!1):(e.checked=!1,e.indeterminate=!0)}e&&window.bootstrap.Dropdown&&(R=new window.bootstrap.Dropdown(h,{autoClose:"outside"}),h.addEventListener("shown.bs.dropdown",function(){v&&i&&setTimeout(()=>{v.focus()},50),G(),f.dataset.customHeight&&(k.style.height=f.dataset.customHeight,k.style.maxHeight="none",k.style.overflowY="auto",k.dataset.customResize="true"),function e(t,l){let n=t.querySelectorAll("[data-index]"),s=null;for(let a of n){let o=a.getAttribute("data-index"),i=l.options[o];if(i&&i.selected){s=a;break}}s&&s.scrollIntoView({behavior:"auto",block:"nearest",inline:"nearest"})}(k,a)})),h.addEventListener("hidden.bs.dropdown",function(){k.dataset.customResize="false"}),h.addEventListener("selectstart",function(e){return e.preventDefault(),e.stopPropagation(),!1}),h.addEventListener("mousedown",function(e){return e.preventDefault(),e.stopPropagation(),!1}),h.addEventListener("dragstart",function(e){return e.preventDefault(),e.stopPropagation(),!1}),h.addEventListener("mouseup",function(e){return e.preventDefault(),e.stopPropagation(),!1}),h.addEventListener("focus",function(e){this.style.outline="none",this.style.boxShadow="none",this.setSelectionRange(0,0)}),N.addEventListener("click",function(e){if(e.preventDefault(),e.stopPropagation(),Array.from(a.options).forEach(e=>e.selected=!1),!a.multiple){let t=Array.from(a.options).find(e=>e.dataset&&"true"===e.dataset.placeholder);t&&(t.selected=!0)}a.dispatchEvent(new Event("change",{bubbles:!0})),V()}),k.addEventListener("click",function(e){let t=e.target;if(t.hasAttribute("data-index")||(t=t.closest("[data-index]")),t&&t.hasAttribute("data-index")){let l=parseInt(t.getAttribute("data-index"),10),n=a.options[l];if(!n||n.disabled)return;if(a.multiple){n.selected=!n.selected;let s=t.querySelector('input[type="checkbox"]');s&&(s.checked=n.selected),t.classList.toggle("active",n.selected)}else{Array.from(a.options).forEach(e=>e.selected=!1),n.selected=!0,k.querySelectorAll("[data-index]").forEach(e=>{e.classList.remove("active");let t=e.querySelector('input[type="radio"]');t&&(t.checked=!1)}),t.classList.add("active");let o=t.querySelector('input[type="radio"]');o&&(o.checked=!0),R&&setTimeout(()=>{R.hide()},100)}a.dispatchEvent(new Event("change",{bubbles:!0})),V()}}),f.getVal=function(){if(a.multiple)return Array.from(l(a)).map(e=>e.value);{let e=l(a);return e.length>0?e[0].value:""}},f.setVal=function(e){let t=Array.from(a.options).find(e=>e.dataset&&"true"===e.dataset.placeholder);if(null==e||""===e)Array.from(a.options).forEach(e=>e.selected=!1),!a.multiple&&t&&(t.selected=!0);else if(Array.isArray(e)){let l=e.map(e=>String(e));Array.from(a.options).forEach(e=>{e.selected=l.includes(String(e.value))}),!a.multiple&&t&&(t.selected=!1)}else{let n=String(e);a.value=n,t&&(t.selected=!1)}a.dispatchEvent(new Event("change",{bubbles:!0})),V()},a.addEventListener("change",()=>V());let B=new MutationObserver(e=>{for(let t of e)"attributes"===t.type&&"disabled"===t.attributeName&&(a.disabled?f.classList.add("disabled"):f.classList.remove("disabled"))});B.observe(a,{attributes:!0}),V(),p?f.style.setProperty("--ts-checkbox-margin-left","6px"):f.style.setProperty("--ts-checkbox-margin-left","0px"),h.addEventListener("keydown",function(e){("Enter"===e.key||"ArrowDown"===e.key)&&(e.preventDefault(),e.stopPropagation(),R&&!x.classList.contains("show")&&(R.show(),i&&v&&setTimeout(()=>{v.focus()},100)))}),v&&v.addEventListener("keydown",function(e){if("ArrowDown"===e.key){if(e.preventDefault(),e.stopPropagation(),E&&E.box){let t=E.box.querySelector("button");if(t){t.focus();return}}let l=[];Array.from(k.children).forEach(e=>{!e.classList.contains("d-none")&&(e.classList.contains("ts-select-group-label")||e.hasAttribute("data-index"))&&l.push(e)}),console.log("All focusable items found:",l.length),l.forEach((e,t)=>{console.log(`Item ${t}:`,e.textContent?.trim(),"Type:",e.classList.contains("ts-select-group-label")?"Group":"Option","Classes:",e.className)}),l.length>0&&(l[0].focus(),console.log("Focused first item:",l[0].textContent?.trim()))}}),E&&E.box&&E.box.addEventListener("keydown",function(e){if("ArrowDown"===e.key){e.preventDefault(),e.stopPropagation();let t=[];Array.from(k.children).forEach(e=>{!e.classList.contains("d-none")&&(e.classList.contains("ts-select-group-label")||e.hasAttribute("data-index"))&&t.push(e)}),t.length>0&&t[0].focus()}})}function o(){let e=document.querySelectorAll("select.ts-select, select[ts-select]");e.forEach(e=>{e.dataset.tsSelectInitialized||a(e)})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",o):o(),window.TsSelect={init:function(e){e?a(e):o()}},"undefined"!=typeof window&&(window.TsSelectLang=window.TsSelectLang||{},window.TsSelectLang.get=function(e){return this.defaults&&this.defaults[e]?this.defaults[e]:null})}();